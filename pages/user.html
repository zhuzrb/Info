<!-- <div class="row">
  <div class="col-sm-4 ">
    <div class="thumbnail">
      <img src="./images/user1.png" alt="...">
      <div class="caption text-left">
        <p>用户名&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp vicky</p>
        <p>真实姓名&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 乔美丽</p>
        <p>注册时间&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 18812344321</p>
        <p>email&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp qiaoml@briup.cn</p>
        <p>状态</p>
        <button class="btn">关闭<p class="btn1"></p></button>
      </div>
    </div>
  </div>
  <div class="col-sm-4">
    <div class="thumbnail">
      <img src="./images/user2.png" alt="...">
      <div class="caption text-left">
        <p>用户名&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp vicky</p>
        <p>真实姓名&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 乔美丽</p>
        <p>手机号&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 18812344321</p>
        <p>email&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp qiaoml@briup.cn</p>
        <p>状态</p>
        <button class="btn">关闭<p class="btn1"></p></button>
      </div>
    </div>
  </div>
  <div class="col-sm-4">
    <div class="thumbnail">
      <img src="./images/user3.png" alt="...">
      <div class="caption text-left">
        <p>用户名&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp vicky</p>
        <p>真实姓名&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 乔美丽</p>
        <p>手机号&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 18812344321</p>
        <p>email&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp qiaoml@briup.cn</p>
        <p>状态</p>
        <button class="btn">关闭<p class="btn1"></p></button>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-sm-4">
    <div class="thumbnail">
      <img src="./images/user4.png" alt="...">
      <div class="caption text-left">
        <p>用户名&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp vicky</p>
        <p>真实姓名&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 乔美丽</p>
        <p>注册时间&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 18812344321</p>
        <p>email&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp qiaoml@briup.cn</p>
        <p>状态</p>
        <button class="btn">关闭<p class="btn1"></p></button>
      </div>
    </div>
  </div>
  <div class="col-sm-4">
    <div class="thumbnail">
      <img src="./images/user5.png" alt="...">
      <div class="caption text-left">
        <p>用户名&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp vicky</p>
        <p>真实姓名&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 乔美丽</p>
        <p>手机号&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 18812344321</p>
        <p>email&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp qiaoml@briup.cn</p>
        <p>状态</p>
        <button class="btn text-right">关闭<p class="btn1"></p></button>
      </div>
    </div>
  </div>
</div>
<style>
 .caption>p{
    margin-left:30px;
    color: #666;
    position: relative;
  }
  .btn{
    height: 28px;
    width: 80px;
    position: absolute;
    bottom: 40px;
    right: 110px;
    border-radius: 10px;
  }
  .btn>p{
    position: absolute;
    height: 25px;
    width: 25px;
    border-radius: 50%;
    background-color:#fff;
    bottom: -10px;
    right: 50px;
  }
</style>
<script>
  $(function(){
    $('.btn').click(function(){
      $('.btn').animate({},3000, function(){
        $('.btn1').css({'transform':'translateX(50px)','transition':'0.5s linear'});
      }); 
    });
  })
</script> -->

<div id="user">
     <button class="btn btn-success btn-sm addBtn">新 增</button>
     <div class="row marginTop">
 <!--        <div class="col-sm-4">
           <div class="thumbnail">
              <img src="./images/user1.png" class="img-circle" alt="...">
                <div class="caption">
                <div class="row">
                   <div class="col-sm-4 col-sm-offset-1">用户名</div>
                   <div class="col-sm-4 col-sm-offset-1">vicky</div>        
                </div>
                <div class="row">
                   <div class="col-sm-4 col-sm-offset-1">真实姓名</div>
                   <div class="col-sm-4 col-sm-offset-1">桥美丽</div>        
                </div>
                <div class="row">
                   <div class="col-sm-4 col-sm-offset-1">注册时间</div>
                  <div class="col-sm-4 col-sm-offset-1">2018-8-12</div>        
                </div>
                <div class="row">
                   <div class="col-sm-4 col-sm-offset-1">邮箱</div>
                <div class="col-sm-4 col-sm-offset-1">vicky</div>        
                </div><div class="row">
                   <div class="col-sm-4 col-sm-offset-1">状态</div>
                    <div class="col-sm-7">
                  <input type="hidden" value="1001">
                  <div class="switch">
                    <input type="checkbox">
                  </div>
                </div>
                </div> </div> -->
     </div> 
</div>
<!-- <div class="container">
  <div class="modal" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header text-center">
        <div>添加用户</div> 
        </div>
        <div class="modal-body">
          <form action="" class="form-horizontal">
            <div class="form-group">
              <label for="" class="col-sm-3 control-label">年级名称</label>
              <div class="col-sm-9">
                <input type="text" class="form-control" name="gradName">
              </div>
            </div>
            <div class="form-group">
              <label for="" class="col-sm-3 control-label">年级描述</label>
              <div class="col-sm-9">
                <input type="text" class="form-control" name="gradSay">
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer text-right">
          <button class="btn btn-danger">关闭</button>
          <button class="btn btn-primary">保存</button>
        </div>
      </div>
    </div>
  </div></div> -->
<div class="modal" id="userModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header text-center">
         <div class="backDiv">
           <i class="iconfont icon-zuo"></i>
           <span>返回</span>
         </div>
         <div class="modal-title">添加用户</div>
      </div>
      <div class="modal-body">
        <form class="form">
          <div class="form-group">
            <label for="">用户名</label>
            <input type="text" name="username" class="form-control" >
          </div>
          <div class="form-group">
            <label for="">密码</label>
            <input type="password" name="password" class="form-control" >
          </div>
          <div class="form-group">
            <label for="">确认密码</label>
            <input type="password" name="password1" class="form-control" >
          </div>
          <div class="form-group">
            <label for="">真实姓名</label>
            <input type="text" name="nickname" class="form-control" >
          </div>
          <div class="form-group">
            <label for="">邮箱</label>
            <input type="email" name="email" class="form-control" >
          </div>
          <div class="form-group hide">
           <button type="reset">重置</button>
          </div>
        </form>
      </div>
      <div class="modal-footer">
      <!-- 提示信息 -->
        <span class="messageSpan"></span>
        <button class="btn btn-success btn-group-sm saveBtn">提 交</button>
      </div>
    </div>
  </div>
</div>
<!-- 弹出框 -->
<div class="alertDiv">
  <div class="alert alert-success">
    <strong>提示：</strong>
    <span>执行成功</span>
  </div>
</div>
<script>
  $(function(){
     //监听开关按钮更改事件
    $('#user').on({
      'switchChange.bootstrapSwitch':
      function(event,state){
        console.log(state);
        //点击修改之后，向后抬传递参数
        //
        var id=$(this).closest('.switch').prev('input').val();
        // alert(id);
        //封装成对象给后台，属性名由后台接口决定，属性值是前端采集的数据
        var obj={
          id:id,
          status:state,
        };
        $.post(baseURL+'/manager/user/changeStatus',obj,function(res){
          console.log(res,'执行成功');
        })

      }
    },'[type=checkbox]');
    loadData()
    //获取数据
    function loadData(){
      $('.marginTop').empty();
      //
      $.get(baseURL+'/manager/user/findAllUser',function(res){
        console.log(res.data);
        res.data.forEach(function(item,index){
          //创建缩略图，追加
          var $thm=$(`      
         <div class="col-sm-4">
           <div class="thumbnail">
              <img src="`+(item.userface?item.userface:'./images/user1.png')+`" class="img-circle" style='width:100px;height:100px' alt="...">
                <div class="caption">
                <div class="row">
                   <div class="col-sm-4 col-sm-offset-1">用户名</div>
                   <div class="col-sm-7">`+(item.username?item.username:'-')+`</div>        
                </div>
                <div class="row">
                   <div class="col-sm-4 col-sm-offset-1">真实姓名</div>
                   <div class="col-sm-7">`+(item.nickname?item.nickname:'-')+`</div>        
                </div>
                <div class="row">
                   <div class="col-sm-4 col-sm-offset-1">注册时间</div>
                   <div class="col-sm-7">`+(item.regTime?item.regTime:'-')+`</div>        
                </div>
                <div class="row">
                   <div class="col-sm-4 col-sm-offset-1">邮箱</div>
                   <div class="col-sm-7">`+(item.email?item.email:'-')+`</div>        
                </div>
                <div class="row">
                    <div class="col-sm-4 col-sm-offset-1">状态</div>
                    <div class="col-sm-7">
                <input type="hidden" value="`+item.id+`">
                <div class="switch">
                    <input type="checkbox">
                </div>
                </div>
                </div>  
                </div>
               `);
          $('.marginTop').append($thm);
          //初始化复选按钮
    $('#user input[type=checkbox]:last').bootstrapSwitch('state',item.enable);
        })
      });
    }
     // $('button:contains(新 增)').click(function(){
     //    //让模态框显示，默认隐藏
     //    $('#myModal').show(1000);
        
     //  })
     //  $('.close').click(function(){
     //    $('#myModal').hide(1000)

     //    })
     //  //表单验证
     //  $(':input').keyup(function(){
     //    if($(this).attr('name')=='gradName'){
     //      if($(this).val().length>6){
     //        //has-success
     //        // form-group
     //        $(this).closest('.form-group').removeClass("has-error");

     //        $(this).closest('.form-group').addClass("has-success");
     //      }else{
     //        $(this).closest('.form-group').removeClass("has-success");

     //        $(this).closest('.form-group').addClass("has-error");

     //      }
     //    }

     //  })
     //设置模态框的高度
     $('.modal-content').height($(window).height())
     //打开模态框
    $('.addBtn').click(function(){
      //重置表单
      $('button[type=reset]').trigger('click');
      //清楚提示信息
      $('.messageSpan').html('')
      $('#userModal').show();
    })
    //关闭模态框
    $('.backDiv').click(function(){
       $('#userModal').hide();
    })
    //提交按钮，保存数据，或者给用户提示为什么没通过验证
    $('.saveBtn').click(function(){
      var username=$('input[name=username]').val();
      var password=$('input[name=password]').val();
      var password1=$('input[name=password1]').val();
      var nickname=$('input[name=nickname]').val();
      var email=$('input[name=email]').val()
      var message='';
      if(username&&password&&password1&&nickname&&email){
        if(password==password1){
          //保存
          var obj={
            username:username,
            password:password,
            nickname:nickname,
            email:email,
          };
          $.post(baseURL+'/manager/user/saveOrUpdateUser',obj,function(res){
            console.log(res,'保存成功')
            //刷新页面，关闭模态框，提示用户执行成功
          loadData();
          $('#userModal').hide();
          $('.alertDiv').addClass('animated slideInRight');
          $('.alertDiv').show();
          setTimeout(function(){
           $('.alertDiv').fadeOut()
          },2000)
          });
          
        }else{
          message='两次密码不一致'
        }
      }else{
        message='请输入完整信息'
      }
      $('.messageSpan').html(message);
    })
  })
</script>
<style>
  #user{
    width: 98%;
    margin: 0 auto;
    background-color:#fff;
    padding: 10px;
  }
.marginTop{
  margin-top: 10px;
  font-size: 20px;
}
.caption .row{
  line-height: 40px;
}
.thumbnail{
  box-shadow: 3px 3px 3px #ccc;
}
.modal{
  background-color: rgba(0,0,0,0.4)
}
/*//设置位置*/
.modal-dialog{
  width: 400px;
  margin-top: 0;
  margin-right: 0;
}
/*设置高度*/
/*.modal-content{
  height:800px;
}*/
.backDiv{
  float: left;
  cursor: pointer;
}
.messageSpan{
  color: red;
}
.alertDiv{
  display: none;
  position: absolute;;
  top: 20px;
  right: 20px;
  width: 300px;
}
</style>
